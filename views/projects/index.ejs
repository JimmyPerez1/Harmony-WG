<%- include('../partials/header') %>

<section class="min-h-screen bg-gray-950 text-white py-12 px-6">
  <div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-bold mb-8">Projects</h1>

    <% if (projects.length === 0) { %>
      <p>No projects yet. <a href="/projects/new" class="text-orange-500 hover:underline">Add one?</a></p>
    <% } else { %>
      <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3">
        <% projects.forEach(project => { %>
          <div class="bg-gray-900 rounded-lg shadow-md overflow-hidden hover:shadow-orange-500/40 transition duration-300">
            <% if (project.image) { %>
              <img src="<%= project.image %>" alt="<%= project.title %>" class="w-full h-48 object-cover">
            <% } %>
            <div class="p-4">
              <h2 class="text-xl font-semibold mb-2"><%= project.title %></h2>
              <p class="text-sm text-gray-300 mb-4"><%= project.description.substring(0, 100) %>...</p>
              <div class="flex justify-between items-center">
                <a href="/projects/<%= project._id %>" class="text-orange-500 hover:underline text-sm">View More</a>
                <% if (user && project.createdBy.equals(user._id)) { %>
                  <a href="/projects/<%= project._id %>/edit" class="text-gray-400 hover:text-orange-400 text-sm">Edit</a>
                <% } %>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>
</section>

<%- include('../partials/footer') %>